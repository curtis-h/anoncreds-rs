import * as wasm from "wasm-pkg";

window.wasm = wasm;

wasm.anoncredsSetDefaultLogger();

const test = () => {
    const GVT_SCHEMA_NAME = "Government Schema";
    const GVT_SCHEMA_VERSION = "1.0";
    const GVT_SCHEMA_ID = "schema:government";
    const GVT_SCHEMA_ATTRIBUTES = ["name", "age", "sex", "height"];
    const GVT_ISSUER_ID = "issuer:id/path=bar";
    const GVT_CRED_DEF_ID = "creddef:government";
    const GVT_CRED_DEF_TAG = "govermenttag";
    
    const schema = wasm.anoncredsCreateSchema(GVT_SCHEMA_NAME, GVT_SCHEMA_VERSION, GVT_ISSUER_ID, GVT_SCHEMA_ATTRIBUTES);
    const cred = wasm.anoncredsCreateCredentialDefinition(GVT_SCHEMA_ID, schema, GVT_CRED_DEF_TAG, GVT_ISSUER_ID, 0, false);
}

const example = () => {
    const schema = wasm.issuerCreateSchema();
    const credOfferResult = wasm.issuerCreateCredentialOffer(schema);
    const credOffer = credOfferResult[0];
    const credDef = credOfferResult[1];
    const credDefPriv = credOfferResult[2];

    const linkSecret = wasm.proverCreateLinkSecret();
    const credRequestResult = wasm.proverCreateCredentialRequest(credOffer, credDef, linkSecret);
    const credRequest = credRequestResult[0];
    const credRequestMeta = credRequestResult[1];

    debugger;
    const credential = wasm.issuerCreateCredential(credOffer, credDef, credDefPriv, credRequest);

    const presentation = wasm.proverCreatePresentation(schema, credDef, credential, credRequestMeta, linkSecret);

    return presentation;
}

window.example = example;

const example2 = () => {
    const schema = {
        "name": "schema name",
        "version": "1.0",
        "attrNames": ["name", "age"],
        "issuerId": "did:web:xyz"
    };

    const credOffer = {
        "schema_id": "did:web:xyz/resource/schema",
        "cred_def_id": "did:web:xyz/resource/cred-def",
        "key_correctness_proof": {
            "c": "86806751842637274982933685392194740618230121525522132774432104260474189629311",
            "xz_cap": "156248328156922358532103114267875642891517947374677978859987648695967970570500042722780277438949530528506610315069426795927083327002229288549790548849695784919348871325754228328212094707246951493627255162632894231589478940959977021389827982289711002985869314333368506190480370073138211985972242213226425643666547620255472788152522073819476746684434335053424040997930719965996530529852685119369843136360211704130317033703012687159115726797412449424924371674196498800566596154588487176433202202237397830861464299118984842182957946533808105164969636949155425118958741409066701411838305452811737015219238111770220693795213151437497034360579660776138487462165931939147966537006589649468042532849056",
            "xr_cap": [
                [
                    "age",
                    "211996776564135153793484659942499754011677491537837194147642507283376687815756783822084991757216247776458030433591040886194822002084051891794410847683326447222763517810241438089820720525350711770121803541237445181182653407674092810469485092612587085074778515144713802245167560302916535479406293522759436258837204460361529262339458125032846112745590364376430243632564969461355813768772392988034107815862870023708431725125556885925515917710622707948839362554070755148053722038500043071081679400001459981721381913036086730507037146244971196959743071142128630446455441842361143835422973210248197168210043692862941966260400838955932360470134009527401350098825062875736254073161261648914285937367190"
                ],
                [
                    "name",
                    "102483470185245458736588594592699561106866004697971226291378781680820727071423261931895531050219349629288306515652188388097200976597833185977386306276816849432283724036452548449175009547030800628932095479131974547626310229000423405946007870076078529410920854004976430287173251334596496969922895195537048250642056002319106884246292030397470217510375736275137195333091285477731249411133745251606941076112714332824942581549860656321152956840884377111800731980729008636803987630982175340832020306678213963021323204670422672053197483313304240518753153684806724650765084058047769678299752010465463992782952975089585689839370478785056651868605685701540237602332148087490111590955724595203889594144232"
                ],
                [
                    "master_secret",
                    "229685639012705793839761745931393107064558732674050170746014471033755028631021579967822718257975437037947870144472790603544379624507093779157312917337279241002667818668807248576112442708057569721433588583898360463690303215943633831954329922914462609993613393326378507530384051767169301288902966171025261367973818981672048591555636367632773161229634992316071928472448584636577052771074629787993442670848305800315952123819603527194652387032006054540320793931368095224544571562479059771232199423755693705646227729179387881822402966407535605891968127098361946840933637672543084846652156550190061950524657509178819782702188120929306435197562163307077351642341866611055951635205710315946495268109541"
                ]
            ]
        },
        "nonce": "818514895799939475119634"
    };

    const credDef = {
        "schemaId": "did:web:xyz/resource/schema",
        "type": "CL",
        "tag": "default-tag",
        "value": {
            "primary": {
                "n": "12049451231877883744143256833730375751020917487215133468492762770526928624425641524060072290741626761460810529188029649536484098537183858239279645847078758377679899113410287650351334484109867516388263299207493223236494983339292085776924730788725132524392899611936855715599493395559221405047262811050685247253569049723526057173002186252673440602870334580413813841689371444181827847292777197575116162382811368601692857464845991588522133680199203562951726858879124182930775486574270440635270209687940354023243256011610881074166873580624658633285923264066798629135012749270852267347030368942698803329015394642409985216741",
                "s": "4414571135660502400414193961456556335613246947313745381121132908801551963770244340684220339497652518159414834216097819538660905600179613617614774354441768658354313643677281683539343686810876987421160287076864572207795812636081149065345823293026892685555742824650627441105770211961754705746101139811951230697483729063988587597537810451435803831531168663503596366129700434885096900863933794333257052363942103513846860522238711734755425037596178650867889776095038159838901891349043217782205101293436242714936468053228682926858897360478081581404465604965782451490590818345645250051965685189410638883010483575040468213918",
                "r": {},
                "rctxt": "6729599563437156572532547956496677514957422937115913752221728717289860287226468280321583037302476244591959473710879116523219199357713661634037360121821911882840420995583963772163264380164865832247780720475216675430510707998396968326470762800986169432393006220920357786418735925205619012099277157415920594279655813851230725147838086614283353995730776605771129656775829737853567072989350520798359626987850335246112326812699176526643842555817446269719714872844067619339283565470414312956508699750967353046876008983937213288634422359512312237202293756655454976646264465855532332250257481041579629305289717781649943788925",
                "z": "7723942609506891655960371990355414838051052377718260953840839177613798880328711385749058546555457744643693779410021309673059166917316707657084515420177308567065425644103947031430076356700646299870179292782712900890064816907243530485885868637975618017267873326630108784088908482650288726577724643316529549125453304236079540762350009592143655991938669955176089350961554291025341654074547358083464618606853047987817211845548524606708640952077949727197183248300540725859115414157381959528134932407667137228298183828702056556600862223833386994817699186256541335385482365180672400977271721397832175414982765895141444404142"
            }
        },
        "issuerId": "did:web:xyz"
    };

    const credDefPriv = {
        "value": {
            "p_key": {
                "p": "37947916065068515809885416019956378411848297795010980381607935174457215751822511607733616708148728699774746975484358979864626114789927593854546099906343623249688525888142020469604268113155794446837561693349790298737375495452062553842938821603553320172429095829148150938418912845111735593187588689737860623821",
                "q": "79381508138793024067361498764047538077987528362426378007050798421675328004366139701053556237606475693158699445025411809451041308998739387065168951309874251901495801996488603497544412246687486432673534236592439621459946183117797788435630186605471905909696245613373221832197726215304315391948907275648674801343"
            }
        }
    };


    const linkSecret = "91993318581943239787710545985430259578940863873840022280074112605544397756609";


    const credRequest = {
        "entropy": "entropy",
        "cred_def_id": "did:web:xyz/resource/cred-def",
        "blinded_ms": {
            "u": "5286330041532882599989607125003063321644384712919232467350705475638354836243222557087679200992477726405820174510711899135675163765267488199749867509892884778470635758598611873369000313216386453854454431355255558674390031872791929054297505159961315938219238012248473529904603248510203042474196980472330306993529415090237373878234348657739464174351562004869165907136862166099591283850205214952255536623259273621110040599096238643938460083798781725993044552553489228338140024066139920829784396586060556167930562186517733758787354018543085537984302480715561888665718713211186168234536654759491236857557569871173008502496",
            "hidden_attributes": [
                "master_secret"
            ],
            "committed_attributes": {}
        },
        "blinded_ms_correctness_proof": {
            "c": "84439179645198530935552685640111187185931058107126027303012269807189031484998",
            "v_dash_cap": "315329696886285230952575030051927901803376036318505203644156400514144037409605944061260276122524662423256923597176781720727026935080423275520481988466504890501836891663969572584921240724663490682183750405706262220082809572703428948939703166435686476007014013350475129086778732544333967951568069927865033482309373974731885907959104486344326646295482318959704987835732187369329378919966591393482214094424706032092638843728489379565711042812777197661507577990274720476616043463690833501215356322678950353759433199616741498566109179252978094108364815800252149889745054050577149147359121477082648962730280788822511298977999782193827402682982742613686163513369273304889548330337673413964134381956290349162174051040827732458",
            "m_caps": {},
            "r_caps": {}
        },
        "nonce": "764676035503177547842276"
    };

    const credRequestMeta = {
        "link_secret_blinding_data": {
            "v_prime": "3734400289193428212271841748052618970613568066796203219070420819907691956070204979818191883485774144211125693856344387402081724286420045757139759795384633119518670226391109786356926212618195739772805535501127843178316548947062557908957457699495489120748009508869731289056061458063072805473122798688907817760387944495417745987606529677559696870176874765575004461409035195510850102539906078155495045522939424163556137134945842079251709936269949179454626922504412754140454982850719148826756233990701178537835948822948218490472116933613609151204995377300614036615351229133418212251653286390181621388077315837956183327362131265819337616247077885"
        },
        "nonce": "764676035503177547842276",
        "link_secret_name": "my-secret-id"
    };

    const credential = wasm.issuerCreateCredential(credOffer, credDef, credDefPriv, credRequest);
}

window.example2 = example2;
